---
import GoogleMap from "@/components/ui/GoogleMap.astro";

const {
  name= "",
  titleName= "Th∆∞·ª£ng t·ªça",
  abbot= "",
  phone= "",
  image= "",
  showSchedule= true,
  scheduleTitle= "Th·ªùi kh√≥a Tu",
  scheduleSubTiTle= "Thi·ªÅn Th·∫•t",
  scheduleTime= "",
  scheduleRepeat= "H√†ng Th√°ng",
  dayTimeArray= [
    '4:00 - 6:00',
    '8:0 - 11:00',
    '13:00 - 17:00',
    '18:30 - 20:30',
  ],
  duration,
  address= "",
  mapEmbed= "",

  // NEW LIST PARTS
  needs = [],          // Ch√πa ƒëang c·∫ßn g√¨
  directions = [],     // Ph∆∞∆°ng h∆∞·ªõng ho√†n thi·ªán
  retreats = [],       // K·∫ø ho·∫°ch kh√≥a tu
} = Astro.props;

// Ki·ªÉm tra xem slot c√≥ n·ªôi dung kh√¥ng
const hasContent = Astro.slots.default;
---

<style>
    .wrap {
        display: grid;
        gap: 1.5rem;
        margin: 2rem 0;
    }

    /* Khi c√≥ n·ªôi dung ‚Üí chia 2 c·ªôt */
    .with-content {
        grid-template-columns: 280px 1fr;
    }

    /* Khi kh√¥ng c√≥ n·ªôi dung ‚Üí 1 c·ªôt full */
    .no-content {
        grid-template-columns: 1fr;
    }

    @media(max-width: 860px){
        .with-content {
            grid-template-columns: 1fr;
        }
    }

    .sidebar {
        padding: 1rem;
        border-radius: 12px;
    }

    img {
        width: 100%;
        border-radius: 10px;
        margin: 0.8rem 0 1.2rem 0;
    }
</style>

<div class={`wrap ${hasContent ? "with-content" : "no-content"}`}>
  <!-- SIDEBAR -->
  <div class="sidebar">

    {image && <img src={image} alt={abbot} />}

    <h4>üîî Tr·ª• tr√¨</h4>
    <p>{titleName}</p>
    <h3>{abbot}</h3>

    {phone && <p class="text-accent"><strong>üìû</strong>{" " + phone}</p>}

    <hr />

    {
      showSchedule
      &&
      <h4>üìÜ {scheduleTitle}</h4>
      <h4>{scheduleSubTiTle}</h4>
      <h5>{scheduleTime && scheduleTime + ' (√ÇL)'} {scheduleSubTiTle !== "H√†ng Ng√†y" && scheduleRepeat}</h5>
      <ul>
        <li>Khuya: <b>{dayTimeArray[0]}</b></li>
        <li>S√°ng: <b>{dayTimeArray[1]}</b></li>
        <li>Chi·ªÅu: <b>{dayTimeArray[2]}</b></li>
        <li>T·ªëi: <b>{dayTimeArray[3]}</b></li>
      </ul>

      <hr />
    }

    {
      duration
      &&
      <h4>‚è∞ Gi·ªù m·ªü C·ªßa</h4>
      <p class="text-accent">{duration} {duration !== "C·∫£ Ng√†y" && "H√†ng Ng√†y"}</p>

      <hr />
    }

    <h4>üçÅ ƒê·ªãa ch·ªâ</h4>
    <p class="text-accent">{address}</p>

    <!-- CH√ôA ƒêANG C·∫¶N G√å -->
    {needs.length > 0 && (
      <div class="section">
        <div class="section-title">üôè Ch√πa ƒëang c·∫ßn</div>
        <ul>
          {needs.map(item => <li>{item}</li>)}
        </ul>
      </div>
    )}

    <!-- PH∆Ø∆†NG H∆Ø·ªöNG HO√ÄN THI·ªÜN -->
    {directions.length > 0 && (
      <div class="section">
        <div class="section-title">üõ† Ph∆∞∆°ng h∆∞·ªõng ho√†n thi·ªán</div>
        <ul>
          {directions.map(item => <li>{item}</li>)}
        </ul>
      </div>
    )}

    <!-- K·∫æ HO·∫†CH KH√ìA TU -->
    {retreats.length > 0 && (
      <div class="section">
        <div class="section-title">üßò‚Äç‚ôÇÔ∏è K·∫ø ho·∫°ch kh√≥a tu</div>
        <ul>
          {retreats.map(item => <li>{item}</li>)}
        </ul>
      </div>
    )}

    {
      mapEmbed
      &&
      <GoogleMap
        embed={mapEmbed}
      />
    }
  </div>

  <!-- MAIN CONTENT (n·∫øu c√≥) -->
  {hasContent && (
    <div>
      <slot />
    </div>
  )}
</div>
